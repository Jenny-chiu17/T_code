<template>
  <div class="app">
    <!-- å°èˆªæ¬„ -->
    <nav class="navbar">
      <div class="logo">ğŸ¢ å…§å¤–è¦æ¯”å°ç³»çµ±</div>
      <div class="user-menu">
        <span>ğŸ‘¤ {{ username }}</span>
        <button class="btn btn-secondary" @click="logout">ç™»å‡º</button>
      </div>
    </nav>

    <!-- é ç±¤åˆ‡æ› -->
    <div class="page-switcher">
      <button 
        v-for="(page, index) in pages" 
        :key="index"
        class="page-tab"
        :class="{ active: currentPage === index }"
        @click="currentPage = index"
      >
        {{ page.icon }} {{ page.name }}
      </button>
    </div>

    <!-- é é¢å…§å®¹ -->
    <div class="page-content">
      <!-- é é¢ 1: é¦–é  -->
      <DashboardPage v-if="currentPage === 0" @navigate="navigateTo" />
      
      <!-- é é¢ 2: æ–°å¢åˆ†æ -->
      <AnalysisPage v-if="currentPage === 1" @navigate="navigateTo" />
      
      <!-- é é¢ 3: å¯©é–±ä¿®æ”¹ -->
      <ReviewPage v-if="currentPage === 2" @navigate="navigateTo" />
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import DashboardPage from './components/DashboardPage.vue'
import AnalysisPage from './components/AnalysisPage.vue'
import ReviewPage from './components/ReviewPage.vue'

const username = ref('ä½¿ç”¨è€…')
const currentPage = ref(0)

const pages = [
  { name: 'é¦–é ', icon: 'ğŸ ' },
  { name: 'æ–°å¢åˆ†æ', icon: 'ğŸ“¤' },
  { name: 'å¯©é–±ä¿®æ”¹', icon: 'ğŸ“‹' }
]

const navigateTo = (pageIndex) => {
  currentPage.value = pageIndex
}

// ğŸ”Œ å¾Œç«¯ä¸²æ¥ï¼šç™»å‡º
const logout = async () => {
  // TODO: å‘¼å«å¾Œç«¯ API
  // await fetch('/api/auth/logout', { method: 'POST' })
  alert('ğŸ”Œ éœ€è¦ä¸²æ¥å¾Œç«¯ API: POST /api/auth/logout')
}
</script>